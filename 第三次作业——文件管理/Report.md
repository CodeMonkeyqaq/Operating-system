# File Management

本文件是操作系统第三次项目——文件管理系统的项目报告。

作者：1652977——王星洲



## 项目背景

​	在内存中开辟一个空间作为文件存储器，在其上实现一个简单的文件系统。

​	退出这个文件系统时，需要该文件系统的内容保存到磁盘上，以便下次可以将其恢复到内存中来。



## 文件操作

### 磁盘

* 格式化
* 打开

### 文件夹

* 创建
* 打开
* 删除
* 属性
* 重命名

### 文件

* 创建
* 打开
* 删除
* 属性
* 重命名



## 技术细节

### 存储空间管理： 显示链接（FAT）	

​	在链式存储的基础上，每个盘区开一个文件用来记录链式存储的下一个节点，解决了链式存储不能随机存取的问题，并且继承了链式存储没有外碎片的优点。



### 空闲空间管理：位图

​	用0和1来标识内存块状态，0为未使用，1为已使用，每次创建文件时从前到后检索空闲块，空闲块被使用时，将数值置为1.



### 目录

采用多级树形目录结构，解决了文件不能同名的问题，加快了检索文件的速度。



## 功能一览

### 创建文件或文件夹

​	向Disk申请Block，申请成功的话分配Block给文件或文件夹，并将文件或文件夹初始化；如果没有申请成功则返回出错信息。



### 删除

#### 删除文件

判断文件是否正在被使用，如果正在被使用，返回出错信息；如果未被使用则删除该文件，释放对应Block，并告知用户删除成功。


#### 删除文件夹

删除文件夹中的各个文件，如果其中有文件正在被使用，则删除失败，如果所有文件都删除成功，则删除成功。



### 重命名

#### 重命名文件

判断重命名是否合法，如果合法，修改成功，并修改对应的属性，FCB

#### 重命名文件夹

除了检测自身是否合法和更改属性以外，还要修改该文件夹下的所有FCB的父文件夹地址



### 搜索

深度优先搜索在多级树形目录中查找文件和文件夹。



## 开发环境

语言：`Java`

IDE: `Intellj IDEA`

